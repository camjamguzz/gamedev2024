<!DOCTYPE html>
<html>
<head>
    <title>Two-Player Parkour Game</title>
    <style>
        body {
            background-repeat: repeat;
            background-size: 80%;
            background-image: url('myBackground01.jpg');
        }
        .player {
            position: absolute;
            width: 50px;
            height: 50px;
        }
        .obstacle {
            position: absolute;
            background-color: red;
        }
        #myImg01 {
            background-color: blue;
        }
        #myImg02 {
            background-color: green;
        }
    </style>
</head>
<body id="myBody">

<h1 align="center">Two-Player Parkour Game</h1>

<script>
    // Global variables
    let myGlobalX = 0;
    let myClock;

    // Player positions and controls
    const player1 = document.createElement('div');
    player1.id = 'myImg01';
    player1.className = 'player';
    player1.style.left = '50px';
    player1.style.top = '400px';
    document.body.appendChild(player1);

    const player2 = document.createElement('div');
    player2.id = 'myImg02';
    player2.className = 'player';
    player2.style.left = '100px';
    player2.style.top = '400px';
    document.body.appendChild(player2);

    const obstacles = [];
    for (let i = 0; i < 5; i++) {
        const obstacle = document.createElement('div');
        obstacle.className = 'obstacle';
        obstacle.style.width = '100px';
        obstacle.style.height = '20px';
        obstacle.style.left = (200 + i * 150) + 'px';
        obstacle.style.top = (300 - i * 50) + 'px';
        document.body.appendChild(obstacle);
        obstacles.push(obstacle);
    }

    // Collision detection function
    function myHitOther(my1, my2) {
        const rect1 = my1.getBoundingClientRect();
        const rect2 = my2.getBoundingClientRect();

        return (
            rect1.right > rect2.left &&
            rect1.left < rect2.right &&
            rect1.bottom > rect2.top &&
            rect1.top < rect2.bottom
        );
    }

    function myCheckHit(player) {
        for (const obstacle of obstacles) {
            if (myHitOther(player, obstacle)) {
                alert(`${player.id === 'myImg01' ? 'Player 1' : 'Player 2'} hit an obstacle! Game Over.`);
                location.reload();
            }
        }
    }

    // Player movement
    document.addEventListener('keydown', (e) => {
        const p1 = document.getElementById('myImg01');
        const p2 = document.getElementById('myImg02');

        switch (e.key) {
            case 'ArrowUp': // Player 1 jump forward
                p1.style.top = (parseInt(p1.style.top) - 50) + 'px';
                p1.style.left = (parseInt(p1.style.left) + 20) + 'px';
                setTimeout(() => {
                    p1.style.top = (parseInt(p1.style.top) + 50) + 'px';
                }, 300);
                myCheckHit(p1);
                break;
            case 'ArrowDown': // Player 1 jump backward
                p1.style.top = (parseInt(p1.style.top) - 50) + 'px';
                p1.style.left = (parseInt(p1.style.left) - 20) + 'px';
                setTimeout(() => {
                    p1.style.top = (parseInt(p1.style.top) + 50) + 'px';
                }, 300);
                myCheckHit(p1);
                break;
            case 'w': // Player 2 jump forward
                p2.style.top = (parseInt(p2.style.top) - 50) + 'px';
                p2.style.left = (parseInt(p2.style.left) + 20) + 'px';
                setTimeout(() => {
                    p2.style.top = (parseInt(p2.style.top) + 50) + 'px';
                }, 300);
                myCheckHit(p2);
                break;
            case 's': // Player 2 jump backward
                p2.style.top = (parseInt(p2.style.top) - 50) + 'px';
                p2.style.left = (parseInt(p2.style.left) - 20) + 'px';
                setTimeout(() => {
                    p2.style.top = (parseInt(p2.style.top) + 50) + 'px';
                }, 300);
                myCheckHit(p2);
                break;
        }
    });

    // Auto-moving background
    function autoMoveBackground() {
        clearInterval(myClock);
        myClock = setInterval(() => {
            myGlobalX -= 5;
            document.getElementById('myBody').style.backgroundPosition = myGlobalX + 'px 0';
        }, 100);
    }

    autoMoveBackground();
</script>
</body>
</html>
